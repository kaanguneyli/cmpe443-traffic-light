#include "GPIO.h"
#include <stdint.h>
#include <stdbool.h>
#include <string.h>



typedef struct {
	volatile uint32_t MODER;
	volatile uint32_t OTYPER;
	volatile uint32_t OSPEEDR;
	volatile uint32_t PUPDR;
	volatile uint32_t IDR;
	volatile uint32_t ODR;
	volatile uint32_t BSRR;
	volatile uint32_t LCKR;
	volatile uint32_t AFRL;
	volatile uint32_t AFRH;
	volatile uint32_t BRR;
	uint32_t reserved;
	volatile uint32_t SECCFGR;
} GPIO;


#define RCC_AHBENR2 *((volatile uint32_t) 0x4002104C)
#define GPIOE ((GPIO *) 0x42021000)


uint32_t reset_matrix[8] = {0};

uint32_t stopping_man[8] = {
		0b00000000000000000000011111100000, //1
		0b00001000000100000000101001010000, //2
		0b00001000000100000000010110100000, //3
		0b00011000000110000001000000001000, //4
		0b00110000000011000100100000010010, //5
		0b01001000000100100011100000011100, //6
		0b00001001100100000000100110010000, //7
		0b00000110011000000000000000000000, //8
};


uint32_t walking_man_1[8] = {
		0b00000000000000000000001111000000, //1
		0b00000100001000000000010000100000, //2
		0b00000100001000000000001001000000, //3
		0b00000100001000000000010000100000, //4
		0b00001100001110000001001000101000, //5
		0b00010010001010000000110001110000, //6
		0b00001011100100000000100110010000, //7
		0b00000110011000000000000000000000, //8
};


uint32_t walking_man_2_4[8] = {
		0b00000000000000000000001111000000, //1
		0b00000100001000000000011000100000, //2
		0b00000100001000000000001001000000, //3
		0b00000100001000000000010000100000, //4
		0b00000101101000000000011001100000, //5
		0b00000110011000000000001111000000, //6
		0b00000010010000000000001001000000, //7
		0b00000001100000000000000000000000, //8
};


uint32_t walking_man_3[8] = {
		0b00000000000000000000001111000000, //1
		0b00000100001000000000010100100000, //2
		0b00000100011000000000001001000000, //3
		0b00000100001000000000010000100000, //4
		0b00001100011000000001010010010000, //5
		0b00010100100100000000111000110000, //6
		0b00001001100100000000100110010000, //7
		0b00000110011000000000000000000000, //8
};


// uses PE3
void init_GPIOE_P3(void) {
	RCC_AHBENR2 |= 1 << 4;
	GPIOE->MODER &= ~(0b11 << (3*2));
	GPIOE->MODER |= (0b01 << (3*2));
}
